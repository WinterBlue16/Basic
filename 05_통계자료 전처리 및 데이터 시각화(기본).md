# 서울시 범죄현황 통계자료 분석 & 시각화

> 서울시 관서별 5대 범죄 발생 & 검거 현황 데이터를 활용, `python` 언어로 데이터 분석 및 전처리하여 시각화까지 진행. 

```python
# 필요 라이브러리 불러오기

import numpy as np 
import pandas as pd
import seaborn as sns

import matplotlib.pyplot as plt # 시각화
from matplotlib import font_manager, rc # rc==run configuration, 한글 폰트를 잡아줌
```



## 1. 데이터 분석 및 전처리

> 데이터를 분석하여 필요한 열들을 새로 만들고, 쓸모없어진 열들을 제거하여 데이터를 전처리한다. 

```python
# 데이터 불러오기(해당 데이터가 python 작업 파일이 있는 파일 내에 존재해야 한다!)

df = pd.read_excel('관서별 5대범죄 발생 및 검거.xlsx', encoding='utf-8') 
# 엑셀 파일을 불러오는 함수

# 데이터 형태 둘러보기

df.head() # head 함수 외 tail, describe, info 함수 등도 활용 가능
```



### 1.1 경찰서 구별로 정리

```python
 # 서울시 경찰청의 소속 구 http://goo.gl/MQSqXX
 
 police_to_gu = {'서대문서': '서대문구', '수서서': '강남구', '강서서': '강서구', '서초서': '서초구','서부서': '은평구', '중부서': '중구', '종로서': '종로구', '남대문서': '중구', '혜화서': '종로구', '용산서': '용산구', '성북서': '성북구', '동대문서': '동대문구',
'마포서': '마포구', '영등포서': '영등포구', '성동서': '성동구', '동작서': '동작구', '광진서': '광진구', '강북서': '강북구', '금천서': '금천구', '중랑서': '중랑구', '강남서': '강남구', '관악서': '관악구', '강동서': '강동구', '종암서': '성북구', '구로서': '구로구', '양천서': '양천구', '송파서': '송파구', '노원서': '노원구', '방배서': '서초구', '은평서': '은평구', '도봉서': '도봉구'}

    
# 관서명에 따른 소속 구 열 추가

df['구별'] = df['관서명'].apply(lambda x : police_to_gu(x, '구 없음'))
# '관서명' 열에 lambda 함수를 적용하고, value가 존재하지 않을 경우 '구 없음' 출력해 열에 채움
# 틈틈이 df.head()로 데이터 형태 확인


# index 열 변경(관서별 -> 구별, column 오름차순 정렬)

gu_df = pd.pivot_table(df, index='구별', aggfunc=np.sum) # 소속 구가 같을 경우 수치합산

# 필요없는 행 삭제

gu_df = gu_df.drop(['구 없음'])
```



### 1.2 범죄별 범죄율 계산 

```python
# 범죄별 검거율(검거율/발생률) 데이터 계산, column 추가

gu_df['강간범죄율'] = gu_df['강간(검거)']/gu_df['강간(발생)']*100
gu_df['강도검거율'] = gu_df['강도(검거)']/gu_df['강도(발생)']*100
gu_df['살인검거율'] = gu_df['살인(검거)']/gu_df['살인(발생)']*100
gu_df['절도검거율'] = gu_df['절도(검거)']/gu_df['절도(발생)']*100
gu_df['폭력검거율'] = gu_df['폭력(검거)']/gu_df['폭력(발생)']*100
gu_df['검거율'] = gu_df['소계(검거)']/gu_df['소계(발생)']*100
```



