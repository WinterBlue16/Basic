# 소켓 통신

![네트워크 소켓(Socket)](https://t1.daumcdn.net/cfile/tistory/99C70D505C7DD7E30A)

> 소켓(SOCKET)이란?

소켓(Socket)은 프로세스가 드넓은 네트워크 세계로 데이터를 내보내거나, 혹은 그 세계로부터 데이터를 받기 위한 실질적인 창구 역할을 한다. 그러므로 프로세스가 데이터를 보내거나 받기 위해서는 **반드시 소켓을 열어서 소켓에 데이터를 써보내거나 소켓으로부터 데이터를 읽어들여야 한다**.

소켓은 프로토콜, IP 주소, 포트 넘버로 정의된다. 

- 프로토콜(Protocol)

  프로토콜은 원래 외교상의 언어로써 의례나 국가간의 약속을 의미한다. 통신에서는 어떤 시스템이 다른 시스템과 통신을 원활하게 수용하도록 해주는 통신 규약, 약속을 뜻한다.

- IP(Internet Protocol)

  전 세계 컴퓨터에 부여된 고유의 식별 주소. 이 때문에 범죄 수사에 사용되기도 한다. EX) (진지)IP 주소 추적해.

- 포트(Port)

  포트는 네트워크 상에서 통신하기 위해 호스트 내부적으로 프로세스가 할당받아야 하는 고유한 숫자다. 한 호스트 내에서 네트워크 통신을 하고 있는 프로세스를 식별하기 위해 사용되는 값이므로, 같은 호스트 내에서 서로 다른 프로세스가 동일한 포트 넘버를 가질 수 없다. 즉, 같은 컴퓨터 내에서 각자 다른 프로그램을 식별하는 번호이다. 



> 소켓 통신의 흐름

![socket 통신 이미지 검색결과](https://img1.daumcdn.net/thumb/R800x0/?scode=mtistory2&fname=https%3A%2F%2Ft1.daumcdn.net%2Fcfile%2Ftistory%2F995C23465C7DD7E30B)

- 서버(Server)

  클라이언트 소켓의 연결 요청을 대기하고, 연결 요청이 오면 클라이언트 소켓을 생성하여 통신이 가능하게 한다. 

  

  1. socket() 함수를 이용하여 소켓 생성

  2. bind() 함수로 IP와 port 번호 설정

  3. listen() 함수로 클라이언트 접근 요청에 수신 대기열을 만들어 몇 개의 클라이언트를 대기시킬지 결정

  4. accept() 함수를 사용하여 클라이언트와의 연결을 기다림

     

- 클라이언트(Client)

  실제로 데이터 송수신이 일어나는 것은 클라이언트 소켓이다.

  

  1. socket() 함수로 가장 먼저 소켓을 연다.
  2. connect() 함수를 이용하여 통신할 서버의 IP와 port 번호에 통신을 시도
  3. 통신 시도 시, 서버가 accept() 함수를 이용하여 클라이언트의 socket descriptor를 반환 
  4. 이를 통해 클라이언트와 서버가 서로 read(), write()를 하며 통신(이 과정이 반복)



> 소켓 종류

- 스트림(TCP, Transmission Control Protocol)
  - 양방향으로 바이트 스트림을 전송, 연결 지향성
  - 오류 수정, 전송처리, 흐름제어 보장
  - 송신된 순서에 따라 중복되지 않게 데이터를 수신함 → 오버헤드 발생
  - 소량의 데이터보다 대량의 데이터 전송에 적합하여, 대부분의 웹 통신, 이메일, 파일전송에 사용되고 있음
  - 아래의 UDP에 비해 속도가 느린 단점이 있음

- 데이터그램(UDP, User Datagram Protocol)
  - 비연결형 소켓
  - 데이터의 크기에 제한이 있음
  - 확실하게 전달이 보장되지 않음, 데이터가 손실되어도 오류가 발생하지 않음
  - 실시간 멀티미디어 정보를 처리하기 위한 용도로 사용됨 EX) 전화



> HTTP 통신과 SOCKET 통신의 비교

- HTTP 통신

  클라이언트의 요청(Request)이 있을 때만 서버가 응답(Response)하여 해당 정보를 전송하고 곧바로 연결을 종료하는 방식

- HTTP 통신의 특징

  - 클라이언트가 요청을 보내는 경우에만 서버가 응답하는 단방향 통신이다. 
  - 서버로부터 응답을 받은 후에는 연결이 바로 종료된다.
  - 실시간 연결이 아니며, 필요한 경우에만 서버로 요청을 보내는 상황에 유용하다.
  - 요청을 보내 Server의 응답을 기다리는 어플리케이션의 개발에 주로 사용된다.



- SOCKET 통신

  서버와 클라이언트가 특정 port를 통해 실시간으로 양방향 통신을 하는 방식

- SOCKET 통신의 특징

  - 서버와 클라이언트가 계속 연결을 유지하는 양방향 통신이다.
  - 서버와 클라이언트가 실시간으로 데이터를 주고받는 상황이 필요한 경우에 사용된다.
  - 실시간 동영상 스트리밍이나 온라인 게임 등과 같은 경우에 자주 사용된다. 



※ 참고 자료

https://helloworld-88.tistory.com/215

https://swalloow.tistory.com/77

